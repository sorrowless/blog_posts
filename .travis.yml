dist: xenial
language: python
python: "3.6"
install:
  - pip install ansible
script:
  - git clone https://github.com/sorrowless/ansible_controller_personal.git
  - cd ansible_controller_personal
  - ./tools/get-roles.sh common-roles.yml
  - ./tools/get-roles.sh get-vendor-roles.yml
  - ansible-playbook tools/switch-to-mitogen.yml
  - echo $ANSIBLE_VAULT_PASS > ./.vault
  - export ANSIBLE_VAULT_PASSWORD_FILE=./.vault
  - ansible-playbook run-personal-blog.yml -e "ansible_ssh_pass=${ANSIBLE_BECOME_PASS}"
