Title: SQLAlchemy. Алхимии пост первый.
Date: 2015-04-08 21:27
Authors: sbog
Slug: sqlalchemy_01
Tags: python, sql, sqlalchemy, db, databases
Lang: ru

На досуге понадобилось написать приложение, активно работающее с базами данных.
Написать захотелось на Python3, который я так люблю. И внезапно я понял, что
толком с базами данных не работал уже лет эдак восемь, с тех пор как еще писал
на C#. Немного почитав доки по python, стало понятно, что есть такая штука, как
DBAPI, которая позволяет реализовать интерфейс к БД. Тут же мне подумалось,
что мое приложение со временем перерастет обычный sqlite, но городить огород
с постгресом сейчас не хочется. Нужна была прослойка. Немного почитав интернет,
я понял, что есть такая широкоупотребимая во всех смыслах этого слова приблуда,
как SQLAlchemy. Мои коллеги, мнением которых я дорожу, услышав это название,
одобрительно закивали головой и начали рассказывать всякое. Послушав минут
пять, я понял, что лучше почитаю-ка я документацию, потому что штука оказалась
довольно объемной и вникать надо было основательно. Активно почитав несколько
дней, я вник в мир SQLAlchemy и заодно понял, что нормальной русской
документации в мире не существует (как обычно, в общем-то). На досуге я решил
восполнить сей пробел и написать серию постов о работе с SQLALchemy. Этот пост
- номер первый, вводный.

Сегодня я расскажу следующее:

1. Что такое SQLAlchemy и зачем она нужна
2. Из каких элементов состоит SQLAlchemy
  1. Core, цель и предназначение
  2. ORM, что это и зачем нужно

### Что такое SQLAlchemy и зачем она нужна

SQLAlchemy - это тулкит для работы с SQL из python, позволяющий пользователям
эффективно и быстро получать доступ к нужным им БД. Основная проблема работы
с БД из языка программирования, умеющего в ООП (всех же научили, что ООП - это
хорошо, да?) заключается в том, что БД следует плоской реляционной модели и
состоит из набора строк и столбцов. Объекты же в языке программирования совсем
не похожи на строки и столбцы. Эту проблему и пытается решить SQLAlchemy.
Тулкит рассматривает БД как набор объектов, подчиняющихся реляционной алгебре,
в которой строки могут быть не просто запрошены из таблицы, но и хитро
заджойнены или переплетены в единую большую и сложную структуру. Для того,
чтобы работа была удобной, SQLAlchemy пытается наложить структуру БД на
объектную парадигму программирования, чтобы управлять таблицами, как классами,
а строками, как экземплярами классов.

### Из каких элементов состоит SQLAlchemy

Алхимия состоит из двух ключевых элементов - Core и ORM, они принципиально
отделены друг от друга и являются полностью независимыми.

#### Core, цель и предназначение

Core часть Алхимии является, по сути, просто прослойкой между приложением и
DBAPI. Основное удобство его использования заключается в том, что вы имеете
единое подключение в случае использования разных БД. Т.е. переезд с sqlite на
postgresql происходит путем подмены одной строки подключения без переписывания
тонн кода. Часто SQLAlchemy используют только с этим уровнем, не используя ORM.

#### ORM, что это и зачем нужно

ORM (Object Related Mapping) - это надстройка над Core, которая позволяет вам
замапить python классы на sql таблицы так, что при создании, изменении или
удалении экземпляра класса с данными, соответствующие изменения произойдут и в
sql таблице, к которой данный класс привязан. Иногда это удобно, иногда не
очень, но в целом это популярный тренд и все очень любят ему следовать (Flask,
 Django - тому пример), поэтому как минимум нужно знать и понимать, как все это
работает.


На этом все, первый выпуск закончен. Дальше мы будем рассматривать, как скачать,
установить и использовать SQLAlchemy, как она устроена изнутри и чем же
все-таки хорош ORM, который в ней реализован.

